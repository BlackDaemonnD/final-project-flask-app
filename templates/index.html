<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Healthcare Spending Survey</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; background-color: #f4f7f6; margin: 0; padding: 40px; }
        .container { max-width: 600px; margin: auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 0 15px rgba(0,0,0,0.1); }
        h2 { text-align: center; color: #333; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input[type="text"], input[type="number"], select { width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
        .expense-item { display: flex; align-items: center; margin-bottom: 10px; }
        .expense-item input[type="checkbox"] { margin-right: 10px; }
        .expense-item .amount-input { display: none; }
        button { background-color: #007bff; color: white; padding: 10px 15px; border: none; border-radius: 4px; cursor: pointer; width: 100%; font-size: 16px; }
        button:hover { background-color: #0056b3; }
        .success-message { text-align: center; color: green; font-weight: bold; margin-top: 20px; }
    </style>
</head>
<body>

<div class="container">
    <h2>Healthcare Spending Survey</h2>
    <form action="/" method="POST">
        <div class="form-group">
            <label for="age">Age:</label>
            <input type="number" id="age" name="age" required min="1">
        </div>
        <div class="form-group">
            <label for="gender">Gender:</label>
            <select id="gender" name="gender" required>
                <option value="">--Please choose an option--</option>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
                <option value="Other">Other</option>
            </select>
        </div>
        <div class="form-group">
            <label for="total_income">Total Monthly Income ($):</label>
            <input type="number" id="total_income" name="total_income" required min="0">
        </div>
        <hr>
        <h4>Monthly Expenses ($)</h4>
        <p>Select a category and enter the amount spent.</p>

        <div class="expense-item">
            <input type="checkbox" id="chk_utilities" name="expenses" value="Utilities">
            <label for="chk_utilities">Utilities</label>
            <input type="number" name="amount_utilities" placeholder="Amount" class="amount-input">
        </div>
        <div class="expense-item">
            <input type="checkbox" id="chk_entertainment" name="expenses" value="Entertainment">
            <label for="chk_entertainment">Entertainment</label>
            <input type="number" name="amount_entertainment" placeholder="Amount" class="amount-input">
        </div>
        <div class="expense-item">
            <input type="checkbox" id="chk_school_fees" name="expenses" value="School Fees">
            <label for="chk_school_fees">School Fees</label>
            <input type="number" name="amount_school_fees" placeholder="Amount" class="amount-input">
        </div>
        <div class="expense-item">
            <input type="checkbox" id="chk_shopping" name="expenses" value="Shopping">
            <label for="chk_shopping">Shopping</label>
            <input type="number" name="amount_shopping" placeholder="Amount" class="amount-input">
        </div>
        <div class="expense-item">
            <input type="checkbox" id="chk_healthcare" name="expenses" value="Healthcare">
            <label for="chk_healthcare">Healthcare</label>
            <input type="number" name="amount_healthcare" placeholder="Amount" class="amount-input">
        </div>
        
        <br>
        <button type="submit">Submit Survey</button>
    </form>
    {% if message %}
        <p class="success-message">{{ message }}</p>
    {% endif %}
</div>

<script>
    // Show amount input only when checkbox is checked
    document.querySelectorAll('.expense-item input[type="checkbox"]').forEach(checkbox => {
        const amountInput = checkbox.parentElement.querySelector('.amount-input');
        amountInput.style.display = checkbox.checked ? 'inline-block' : 'none';
        checkbox.addEventListener('change', () => {
            amountInput.style.display = checkbox.checked ? 'inline-block' : 'none';
            if(checkbox.checked) {
                amountInput.required = true;
            } else {
                amountInput.required = false;
                amountInput.value = '';
            }
        });
    });
</script>

</body>
</html>